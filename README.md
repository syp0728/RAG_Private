# Private RAG AI Agent

ì˜¨í”„ë ˆë¯¸ìŠ¤ ê¸°ë°˜ ê¸°ì—…ìš© RAG(Retrieval-Augmented Generation) ì‹œìŠ¤í…œ

## ë¹ ë¥¸ ì‹œì‘

### ì´ˆê¸° ì„¤ì • (ì²˜ìŒ í•œ ë²ˆë§Œ)

#### 1. Ollama ì„¤ì¹˜ ë° ëª¨ë¸ ë‹¤ìš´ë¡œë“œ
```powershell
# Ollama ë‹¤ìš´ë¡œë“œ: https://ollama.ai/download
# ì„¤ì¹˜ í›„ ëª¨ë¸ ë‹¤ìš´ë¡œë“œ
ollama pull llama3.1:8b-instruct-q4_K_M
```

#### 2. Backend ì„¤ì •
```powershell
# í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd C:\Users\SSPLUS\Documents\RAG_Private

# Backend ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd backend

# ê°€ìƒí™˜ê²½ ìƒì„± (ì²˜ìŒ í•œ ë²ˆë§Œ)
python -m venv venv311

# ê°€ìƒí™˜ê²½ í™œì„±í™”
.\venv311\Scripts\Activate.ps1

# ì˜ì¡´ì„± ì„¤ì¹˜ (ì²˜ìŒ í•œ ë²ˆë§Œ)
pip install -r requirements.txt

# ì„ë² ë”© ëª¨ë¸ ë‹¤ìš´ë¡œë“œ (ì²˜ìŒ í•œ ë²ˆë§Œ)
python scripts/init_models.py
```

#### 3. Frontend ì„¤ì •
```powershell
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd C:\Users\SSPLUS\Documents\RAG_Private

# Frontend ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd frontend

# ì˜ì¡´ì„± ì„¤ì¹˜ (ì²˜ìŒ í•œ ë²ˆë§Œ)
npm install
```

### ì‹¤í–‰ ë°©ë²• (ë§¤ë²ˆ ì‹¤í–‰ ì‹œ)

**ì¤‘ìš”**: ë‹¤ìŒ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

#### 1ë‹¨ê³„: Ollama ì„œë²„ ì‹¤í–‰
ìƒˆ PowerShell í„°ë¯¸ë„ì„ ì—´ê³ :
```powershell
ollama serve
```
**ì£¼ì˜**: ì´ í„°ë¯¸ë„ì„ ë‹«ì§€ ë§ˆì„¸ìš”! Ollama ì„œë²„ê°€ ê³„ì† ì‹¤í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

#### 2ë‹¨ê³„: Backend ì„œë²„ ì‹¤í–‰
ìƒˆ PowerShell í„°ë¯¸ë„ì„ ì—´ê³ :
```powershell
# í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd C:\Users\SSPLUS\Documents\RAG_Private\backend

# ê°€ìƒí™˜ê²½ í™œì„±í™”
.\venv311\Scripts\Activate.ps1

# Backend ì„œë²„ ì‹¤í–‰
python app.py
```
BackendëŠ” `http://localhost:5000`ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

#### 3ë‹¨ê³„: Frontend ì‹¤í–‰
ìƒˆ PowerShell í„°ë¯¸ë„ì„ ì—´ê³ :
```powershell
# í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd C:\Users\SSPLUS\Documents\RAG_Private\frontend

# Frontend ì‹¤í–‰
npm run dev
```
FrontendëŠ” `http://localhost:3000` (ë˜ëŠ” ë‹¤ë¥¸ í¬íŠ¸)ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### ì‹¤í–‰ í™•ì¸

1. ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:3000` ì ‘ì†
2. ìƒë‹¨ì— "ë°±ì—”ë“œ ì—°ê²°ë¨" í‘œì‹œ í™•ì¸
3. íŒŒì¼ ê´€ë¦¬ íƒ­ì—ì„œ íŒŒì¼ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸
4. ì±„íŒ… íƒ­ì—ì„œ ì§ˆë¬¸ í…ŒìŠ¤íŠ¸

### ì¢…ë£Œ ë°©ë²•

ê° í„°ë¯¸ë„ì—ì„œ `Ctrl + C`ë¥¼ ëˆŒëŸ¬ ì¢…ë£Œí•©ë‹ˆë‹¤.

## ë¬¸ì„œ

| ë¬¸ì„œ | ì„¤ëª… | ëŒ€ìƒ |
|------|------|------|
| ğŸ“¦ [**ì„¤ì¹˜ ê°€ì´ë“œ**](docs/INSTALLATION_GUIDE.md) | ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ì¹˜ + í”„ë¡œì íŠ¸ ì‹¤í–‰ | ì†ŒìŠ¤ì½”ë“œê°€ ìˆì„ ë•Œ |
| ğŸ—ï¸ [**ìŠ¤ìºí´ë”© ê°€ì´ë“œ**](docs/SCAFFOLDING_GUIDE.md) | ì²˜ìŒë¶€í„° ì§ì ‘ ì½”ë“œ ì‘ì„± | ì†ŒìŠ¤ì½”ë“œê°€ ì—†ì„ ë•Œ |
| ğŸ“‹ [ê¸°ìˆ  ëª…ì„¸ì„œ](docs/TECHNICAL_SPEC.md) | ì•„í‚¤í…ì²˜, ì•Œê³ ë¦¬ì¦˜, ìš´ì˜ | ìƒì„¸ ê¸°ìˆ  ì´í•´ |
| ğŸ”„ [íŒŒì´í”„ë¼ì¸ ìƒì„¸](docs/PIPELINE.md) | ë¬¸ì„œ ì²˜ë¦¬ / ê²€ìƒ‰ íë¦„ | ë™ì‘ ì›ë¦¬ ì´í•´ |

## ì£¼ìš” ê¸°ëŠ¥

- âœ… í•˜ì´ë¸Œë¦¬ë“œ ìì› ë¶„ë°° (ì„ë² ë”©: CPU, LLM: GPU)
- âœ… Layout-aware ë¬¸ì„œ ì²˜ë¦¬
- âœ… 100% ì˜¤í”„ë¼ì¸ ë™ì‘
- âœ… í• ë£¨ì‹œë„¤ì´ì…˜ ë°©ì§€
- âœ… ë‹¤ì¤‘ í‘œ(Table) ì²˜ë¦¬ ë°©ë²• ì§€ì›
- âœ… í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ (Vector + BM25)
- âœ… Re-Ranking (Cross-Encoder)

## ğŸ“Š í‘œ(Table) ì²˜ë¦¬ ë°©ë²• 5ê°€ì§€

ì´ ì‹œìŠ¤í…œì€ ë‹¤ì–‘í•œ í˜•íƒœì˜ í‘œë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ 5ê°€ì§€ ë°©ë²•ì„ ì§€ì›í•©ë‹ˆë‹¤:

### 1. pdfplumber í…ìŠ¤íŠ¸ í‘œ ì¶”ì¶œ
| í•­ëª© | ë‚´ìš© |
|------|------|
| **ë°©ì‹** | PDF ë‚´ë¶€ì˜ í…ìŠ¤íŠ¸ ê¸°ë°˜ í‘œ êµ¬ì¡°ë¥¼ ì§ì ‘ íŒŒì‹± |
| **ì¥ì ** | ë¹ ë¥´ê³  ì •í™•í•¨, í…ìŠ¤íŠ¸ ê¸°ë°˜ PDFì— ìµœì  |
| **ë‹¨ì ** | ì´ë¯¸ì§€ë¡œ ëœ í‘œëŠ” ì¸ì‹ ë¶ˆê°€ |
| **ë©”ì„œë“œ** | `_process_pdf_with_pdfplumber()`, `page.extract_tables()` |

### 2. ì´ë¯¸ì§€ OCR (EasyOCR)
| í•­ëª© | ë‚´ìš© |
|------|------|
| **ë°©ì‹** | í˜ì´ì§€ë¥¼ ì´ë¯¸ì§€ë¡œ ë³€í™˜ í›„ OCRë¡œ í…ìŠ¤íŠ¸ ì¶”ì¶œ |
| **ì¥ì ** | ìŠ¤ìº” ë¬¸ì„œ, ì´ë¯¸ì§€ PDF ì²˜ë¦¬ ê°€ëŠ¥ |
| **ë‹¨ì ** | í‘œ êµ¬ì¡° ì¸ì‹ ì–´ë ¤ì›€, ì†ë„ ëŠë¦¼ |
| **ë©”ì„œë“œ** | `_extract_image_tables_with_ocr()`, `reader.readtext()` |

### 3. OpenCV í‘œ ì„  ê°ì§€
| í•­ëª© | ë‚´ìš© |
|------|------|
| **ë°©ì‹** | ì´ë¯¸ì§€ì—ì„œ ìˆ˜í‰/ìˆ˜ì§ ì„ ì„ ê°ì§€í•˜ì—¬ ì…€ ì˜ì—­ ë¶„ë¦¬ |
| **ì¥ì ** | ì„ ì´ ìˆëŠ” í‘œ ì •í™•í•˜ê²Œ ì¸ì‹, ì…€ ë‹¨ìœ„ OCR ê°€ëŠ¥ |
| **ë‹¨ì ** | ì„ ì´ ì—†ëŠ” í‘œëŠ” ì¸ì‹ ë¶ˆê°€ |
| **ë©”ì„œë“œ** | `_detect_table_cells_opencv()`, `cv2.morphologyEx()` |

### 4. EasyOCR ì¢Œí‘œ ê¸°ë°˜ ì¶”ë¡ 
| í•­ëª© | ë‚´ìš© |
|------|------|
| **ë°©ì‹** | OCR ê²°ê³¼ì˜ ì¢Œí‘œ(bbox)ë¥¼ ë¶„ì„í•˜ì—¬ í–‰/ì—´ êµ¬ì¡° ì¶”ë¡  |
| **ì¥ì ** | ì„ ì´ ì—†ëŠ” í‘œë„ ì²˜ë¦¬ ê°€ëŠ¥ |
| **ë‹¨ì ** | ë³µì¡í•œ í‘œ êµ¬ì¡°ì—ì„œ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥ |
| **ë©”ì„œë“œ** | `_extract_image_tables_with_ocr()` ë‚´ ì¢Œí‘œ ê·¸ë£¹í™” ë¡œì§ |

### 5. Column-first Contextual Table Parsing
| í•­ëª© | ë‚´ìš© |
|------|------|
| **ë°©ì‹** | ì—´ ë‹¨ìœ„ë¡œ ìˆœíšŒí•˜ë©° ë³‘í•© ì…€ ì±„ìš°ê¸° + ê³„ì¸µ êµ¬ì¡° í…ìŠ¤íŠ¸ ìƒì„± |
| **ì¥ì ** | ë³‘í•© ì…€ ì²˜ë¦¬, LLMì´ ì´í•´í•˜ê¸° ì‰¬ìš´ ê³„ì¸µí˜• ì¶œë ¥ |
| **ë‹¨ì ** | ë‹¨ìˆœí•œ í‘œì—ëŠ” ì˜¤ë²„í—¤ë“œ |
| **ë©”ì„œë“œ** | `_pdfplumber_table_to_markdown()`, `_excel_table_to_markdown()` |

### ì²˜ë¦¬ ìš°ì„ ìˆœìœ„

```
PDF ì²˜ë¦¬:
  1. OpenCV í‘œ ì„  ê°ì§€ (ìš°ì„ ) â†’ ì„±ê³µ ì‹œ ì…€ë³„ OCR
  2. pdfplumber í…ìŠ¤íŠ¸ í‘œ ì¶”ì¶œ (í´ë°±)
  3. ì¼ë°˜ í…ìŠ¤íŠ¸ ì¶”ì¶œ

Excel ì²˜ë¦¬:
  1. openpyxl/xlrdë¡œ ì…€ ë°ì´í„° + ë³‘í•© ì…€ ì •ë³´ ì¶”ì¶œ
  2. Column-first Forward Fill ì ìš©
  3. ê³„ì¸µí˜• í…ìŠ¤íŠ¸ + Markdown í…Œì´ë¸” ìƒì„±
```

### ì¶œë ¥ ì˜ˆì‹œ (ê³„ì¸µí˜• í…ìŠ¤íŠ¸)

```
[ê³„ì¸µí˜• í‘œ ë°ì´í„°]
  - ê³µì‚¬ > ìì¬ë¹„ > ì² ê·¼ >> ê¸ˆì•¡: 1000ì›
  - ê³µì‚¬ > ìì¬ë¹„ > ì½˜í¬ë¦¬íŠ¸ >> ê¸ˆì•¡: 2000ì›
  - ê³µì‚¬ > ì¸ê±´ë¹„ > ìš©ì ‘ê³µ >> ê¸ˆì•¡: 3000ì›

[í‘œ ì›ë³¸ (Markdown)]
| ëŒ€ë¶„ë¥˜ | ì¤‘ë¶„ë¥˜ | í•­ëª© | ê¸ˆì•¡ |
| --- | --- | --- | --- |
| ê³µì‚¬ | ìì¬ë¹„ | ì² ê·¼ | 1000ì› |
...
```

## ê¸°ìˆ  ìŠ¤íƒ

- Frontend: React + Vite
- Backend: Python Flask + LangChain
- LLM: Ollama (llama3.1:8b-instruct-q4_K_M)
- Vector DB: ChromaDB
- Embedding: bge-m3 (CPU)

---

ìì„¸í•œ ë‚´ìš©ì€ [docs/README.md](docs/README.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.
